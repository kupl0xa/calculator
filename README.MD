# Calculator App

Calculator App - это веб-сервис на Go, который позволяет создавать задачи с арифметическими операциями, получать результаты выполнения задач и просматривать список задач с их статусами.

## Оглавление

- [Установка и запуск](#установка)
- [Запуск в Docker](#запуск-в-docker)
- [Использование](#использование)
- [API](#api)
- [Тестирование](#тестирование)
- [Наблюдаемость](#наблюдаемость)
- [Вендоринг зависимостей](#вендоринг-зависимостей)

## Установка и запуск

1. Клонируйте репозиторий:
    ```sh
    git clone https://github.com/kupl0xa/calculator.git
    cd calculator
    ```

2. Сборка и запуск:
    ```sh
    make run
    ```
    Сервер будет запущен на `http://localhost:8080`

## Запуск в Docker

  ```sh
  make docker-run
  ```
  Сервер будет запущен на `http://localhost:8080`

## API

### Создание задачи

**Запрос:**
```sh
POST /tasks
```

**Тело запроса:**
```json
{
  "x": 10,
  "y": 5,
  "operator": "+"
}
```

**Команда `curl`:**
```sh
curl -X POST http://localhost:8080/tasks -H "Content-Type: application/json" -d '{"x": 10, "y": 5, "operator": "+"}'
```

**Ответ:**
```json
{
  "id": 1
}
```

### Получение результата задачи

**Запрос:**
```sh
GET /tasks/{id}
```

**Команда `curl`:**
```sh
curl -X GET http://localhost:8080/tasks/1
```

**Ответ:**
```json
{
  "id": 1,
  "result": 15
}
```

### Список задач

**Запрос:**
```sh
GET /tasks
```

**Команда `curl`:**
```sh
curl -X GET http://localhost:8080/tasks
```

**Ответ:**
```json
[
  {
    "id": 1,
    "status": "Completed"
  },
  {
    "id": 2,
    "status": "Pending"
  }
]
```

## Тестирование

Запуск тестов:
```sh
make test
```

Покрытие тестами:
```sh
make test-cov
```

## Наблюдаемость

### Метрики

Метрики доступны по адресу:
```
http://localhost:8080/metrics
```

### Трейсинг

Для трейсинга используется OpenTelemetry. Трейсы экспортируются в stdout.

## Вендоринг зависимостей

Для обеспечения стабильности и воспроизводимости сборки, зависимости проекта добавлены в каталог `vendor`.
